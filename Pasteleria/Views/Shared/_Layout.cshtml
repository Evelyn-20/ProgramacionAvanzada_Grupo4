<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Pastelería Artesanal</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.13.7/css/dataTables.bootstrap5.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="container">
                <a href="/" class="logo">
                    <i class="fas fa-birthday-cake"></i>
                    <span>Pastelería</span>
                </a>
                <ul class="nav-menu">
                    <li><a href="/">Inicio</a></li>
                    <li><a href="/Producto/ListadoProductos">Inventario</a></li>

                    <!-- Categorías (dropdown dinámico) -->
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button"
                           data-bs-toggle="dropdown" aria-expanded="false">
                            Categorías
                        </a>
                        <ul id="menu-categorias" class="dropdown-menu"></ul>
                    </li>

                    <li><a href="/Cliente/ListadoClientes">Clientes</a></li>
                    <li><a href="#sobre-nosotros">Sobre Nosotros</a></li>
                    <li><a href="#contacto">Contacto</a></li>
                    <li>
                        <a href="#" class="btn-cart">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count">0</span>
                        </a>
                    </li>
                </ul>

                <div class="hamburger">
                    <span></span><span></span><span></span>
                </div>
            </div>
        </nav>
    </header>

    <main>
        @RenderBody()
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Pastelería Artesanal</h3>
                    <p>Creando momentos dulces desde 2020</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Enlaces</h4>
                    <ul>
                        <li><a href="#">Productos</a></li>
                        <li><a href="/Cliente/ListadoClientes">Clientes</a></li>
                        <li><a href="#">Sobre Nosotros</a></li>
                        <li><a href="#">Contacto</a></li>
                        <li><a href="#">Política de Privacidad</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contacto</h4>
                    <ul>
                        <li><i class="fas fa-phone"></i> +506 1234-5678</li>
                        <li><i class="fas fa-envelope"></i> info@pasteleria.com</li>
                        <li><i class="fas fa-map-marker-alt"></i> San José, Costa Rica</li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Horarios</h4>
                    <ul>
                        <li>Lunes - Viernes: 8am - 6pm</li>
                        <li>Sábado: 9am - 5pm</li>
                        <li>Domingo: Cerrado</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Pastelería Artesanal. Todos los derechos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/dataTables.bootstrap5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script src="~/js/site.js" asp-append-version="true"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
          const ul = document.getElementById('menu-categorias');
          if (!ul) return;

          try {
            const res = await fetch('/Categoria/ActivasJson', { cache: 'no-store' });
            if (!res.ok) throw new Error('No se pudo cargar categorías');
            const data = await res.json();

            if (!Array.isArray(data) || data.length === 0) {
              ul.innerHTML = `
                <li><a class="dropdown-item" href="/Categoria/ListadoCategorias">Administrar categorías…</a></li>`;
              return;
            }

            const items = data.map(c => {
              const id  = c.idCategoria ?? c.IdCategoria;
              const nom = c.nombreCategoria ?? c.NombreCategoria;
              return `<li>
                        <a class="dropdown-item" href="/Producto/ListadoProductos?IdCategoria=${id}">
                          ${nom}
                        </a>
                      </li>`;
            }).join('');

            ul.innerHTML = `
              ${items}
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item" href="/Categoria/ListadoCategorias">Administrar categorías…</a></li>`;
          } catch (e) {
            ul.innerHTML = `
              <li><a class="dropdown-item" href="/Categoria/ListadoCategorias">Categorías (admin)</a></li>`;
            console.error(e);
          }
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>
